{% extends 'shop/base.html' %}
{% load humanize %}
{% block content %}
<section class="px-5">
  <div class="container px-4 px-lg-5 mt-5">
    <h2 class="mb-4 text-center">ğŸ“¦ ë°°ì†¡ ì¡°íšŒ</h2>

    {% if orders %}
      {% for order in orders %}
        <div class="card mb-4">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-md-3">
                {% if order.post.uploaded_image %}
                  <img src="{{ order.post.uploaded_image.url }}" alt="{{ order.post.title }}" class="img-fluid rounded" style="max-height: 100px; object-fit: cover;">
                {% else %}
                  <img src="https://dummyimage.com/100x100/ced4da/6c757d.jpg" alt="No image" class="img-fluid rounded">
                {% endif %}
              </div>
              <div class="col-md-9">
                <h5>{{ order.post.title }}</h5>
                <p>ê°€ê²©: â‚©{{ order.amount|intcomma }}</p>
                <p>ì£¼ë¬¸ì¼: {{ order.created_at|date:"Y-m-d H:i" }}</p>

                <!-- ë°°ì†¡ ìƒíƒœ -->
                <div class="mt-2">
                  {% if order.status == 'ë°°ì†¡ì¤€ë¹„ì¤‘' %}
                    <span class="badge bg-light text-dark">ğŸšš ë°°ì†¡ ì¤€ë¹„ì¤‘</span>
                    <span class="ms-2 text-muted">ë°°ì†¡ì€ 1~3ì¼ ë‚´ ì‹œì‘ë©ë‹ˆë‹¤.</span>
                  {% elif order.status == 'ë°°ì†¡ì¶œë°œ' %}
                    <span class="badge bg-info text-dark">ğŸ“¦ ë°°ì†¡ ì¶œë°œ</span>
                  {% elif order.status == 'ë°°ì†¡ì™„ë£Œ' %}
                    <span class="badge bg-success">âœ… ë°°ì†¡ ì™„ë£Œ</span>
                  {% else %}
                    <span class="badge bg-secondary">ëŒ€ê¸°ì¤‘</span>
                  {% endif %}
                </div>

                <a href="{% url 'shopdetail' order.post.pk %}"
                   class="btn btn-sm mt-3"
                   style="background:#212529; color:#fff;
                          font-family:-apple-system, BlinkMacSystemFont, 'Helvetica Neue', Arial, sans-serif;"
                   onmouseover="this.style.background='#343a40'"
                   onmouseout="this.style.background='#212529'">
                   ìƒí’ˆ ìƒì„¸
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-muted text-center">ë°°ì†¡ ì˜ˆì • ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
